import{d as w,u as S,K as T,r as v,q as d,v as B,c as y,e as E,D as P,w as $,f as N,i as z,h as u,L as K,t as A,k as M,M as q,N as F,_ as V}from"./index-2494d58d.js";const L=["data-node-tree"],j=w({__name:"AppNodeTree",props:{scrollRef:{}},setup(g){const f=g,{getCurrentSelectedNodeId:k,setCurrentSelectedNodeId:m}=S(),{bodyNode:p,getNodePaths:_}=T(),c=v(null),D=d(()=>p.value?[p.value]:[]),l=e=>e,a=v(new Set),x=d(()=>[...a.value].filter((e,t,n)=>_(e).map(s=>s.instanceID).every(s=>n.includes(s)))),I=(e,{data:t})=>{a.value.add(t.instanceID)},C=(e,{data:t})=>{a.value.delete(t.instanceID)},o=d({get:()=>k()||void 0,set:e=>m(e||"")}),b=e=>{if(!f.scrollRef)return;const{wrapRef:t,setScrollTop:n}=f.scrollRef;if(!t)return;const r=t.querySelector(`[data-node-tree="${e}"]`);if(!r)return;const s=t.getBoundingClientRect(),h=r.getBoundingClientRect(),i=h.top-s.top;i>=0&&s.height>=i+h.height||n(i+t.scrollTop)},R=e=>{o.value=(e==null?void 0:e.instanceID)||"",e!=null&&e.instanceID&&F(100).then(()=>{b(e.instanceID)})};return B([o],()=>{const e=o.value;e&&_(e).forEach(n=>a.value.add(n.instanceID)),c.value&&c.value.setCurrentKey(e)},{immediate:!0}),(e,t)=>(y(),E("div",{class:u(e.$style.box)},[(y(),P(M(q),{ref_key:"treeRef",ref:c,key:o.value,data:D.value,props:{label:"instanceName",children:"nodes"},"default-expanded-keys":x.value,"expand-on-click-node":!1,"check-on-click-node":!0,"highlight-current":!0,"current-node-key":o.value,"node-key":"instanceID",onNodeExpand:I,onNodeCollapse:C,onCurrentChange:R},{default:$(({data:n})=>[N("div",{class:u(e.$style.info),"data-node-tree":l(n).instanceID},[z(K,{class:u(e.$style.info_icon),icon:l(n).basicInfo.icon},null,8,["class","icon"]),N("span",null,A(l(n).instanceName),1)],10,L)]),_:1},8,["data","default-expanded-keys","current-node-key"]))],2))}}),G="_box_1z01b_1",H="_info_1z01b_5",J="_info_icon_1z01b_11",O={box:G,info:H,info_icon:J},Q={$style:O},X=V(j,[["__cssModules",Q]]);export{X as default};
