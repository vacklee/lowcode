import{d as w,u as S,l as E,r as v,f as d,m as T,o as y,h as B,c as P,w as $,k as m,e as z,n as u,_ as A,t as K,p as q,E as F,q as M,s as V}from"./index-05e2b7d4.js";const j=["data-node-tree"],G=w({__name:"AppNodeTree",props:{scrollRef:{}},setup(N){const f=N,{getCurrentSelectedNodeId:g,setCurrentSelectedNodeId:k}=S(),{bodyNode:p,getNodePaths:_}=E(),c=v(null),x=d(()=>p.value?[p.value]:[]),l=e=>e,a=v(new Set),D=d(()=>[...a.value].filter((e,t,n)=>_(e).map(s=>s.instanceID).every(s=>n.includes(s)))),I=(e,{data:t})=>{a.value.add(t.instanceID)},C=(e,{data:t})=>{a.value.delete(t.instanceID)},o=d({get:()=>g()||void 0,set:e=>k(e||"")}),b=e=>{if(!f.scrollRef)return;const{wrapRef:t,setScrollTop:n}=f.scrollRef;if(!t)return;const r=t.querySelector(`[data-node-tree="${e}"]`);if(!r)return;const s=t.getBoundingClientRect(),h=r.getBoundingClientRect(),i=h.top-s.top;i>=0&&s.height>=i+h.height||n(i+t.scrollTop)},R=e=>{o.value=(e==null?void 0:e.instanceID)||"",e!=null&&e.instanceID&&M(100).then(()=>{b(e.instanceID)})};return T([o],()=>{const e=o.value;e&&_(e).forEach(n=>a.value.add(n.instanceID)),c.value&&c.value.setCurrentKey(e)},{immediate:!0}),(e,t)=>(y(),B("div",{class:u(e.$style.box)},[(y(),P(q(F),{ref_key:"treeRef",ref:c,key:o.value,data:x.value,props:{label:"instanceName",children:"nodes"},"default-expanded-keys":D.value,"expand-on-click-node":!1,"check-on-click-node":!0,"highlight-current":!0,"current-node-key":o.value,"node-key":"instanceID",onNodeExpand:I,onNodeCollapse:C,onCurrentChange:R},{default:$(({data:n})=>[m("div",{class:u(e.$style.info),"data-node-tree":l(n).instanceID},[z(A,{class:u(e.$style.info_icon),icon:l(n).basicInfo.icon},null,8,["class","icon"]),m("span",null,K(l(n).instanceName),1)],10,j)]),_:1},8,["data","default-expanded-keys","current-node-key"]))],2))}}),H="_box_1z01b_1",J="_info_1z01b_5",L="_info_icon_1z01b_11",O={box:H,info:J,info_icon:L},Q={$style:O},X=V(G,[["__cssModules",Q]]);export{X as default};
